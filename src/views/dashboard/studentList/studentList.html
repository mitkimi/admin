<div class="page">
  <div class="welcome">
    欢迎光临集思学院网申系统！
  </div>
  <div class="basic-info-container" v-loading="loading">
    <div class="info-box info-box-default">
      <div class="num"><number-grow :value="pageData.summarize.submitNum"></number-grow>条</div>
      <div class="name">新提交信息</div>
    </div>
    <div class="info-box info-box-default">
      <div class="num"><number-grow :value="pageData.summarize.applyNum"></number-grow>个</div>
      <div class="name">申请信息</div>
    </div>
    <div class="info-box info-box-success">
      <div class="num"><number-grow :value="pageData.summarize.completeNum"></number-grow>个</div>
      <div class="name">完成申请</div>
    </div>
    <div class="info-box info-box-danger">
      <div class="num"><number-grow :value="pageData.summarize.warningNum"></number-grow>条</div>
      <div class="name">网申预警</div>
    </div>
  </div>
  <div class="main">
    <div class="filter">
      <div class="filter-item" style="width: 300px;">
        <span style="width: 100px;">学生姓名：</span>
        <el-input v-model="search.studentName" placeholder="学生姓名"></el-input>
      </div>
      <div class="filter-item" style="width: 300px;">
        <span style="width: 80px;">状态：</span>
        <el-select v-model="search.infoType" placeholder="请选择">
            <el-option
              v-for="item in pageData.status"
              :key="item.value"
              :label="item.label"
              :value="item.value">
            </el-option>
          </el-select>
      </div>
      <div class="filter-btn">
        <el-button type="primary" @click="handleSearchSubmit('filter')">查 询</el-button>
        <el-button @click="handleClearFilter">重 置</el-button>
      </div>
    </div>
    <!-- <div style="margin-top: 10px;">
      <div class="filter-btn">
        <el-button type="primary" icon="el-icon-plus" @click="handleCreateStudent">新建</el-button>
      </div>
    </div> -->
  </div>
  <div v-if="filterShow" style="font-size: 14px; margin-top: 10px;text-align: center">
    当前筛选共有{{pageData.filterSummarize.applyNumForSearch}}条信息
  </div>
  <div class="main" style="min-height:calc(100vh - 580px)">
    <div class="table-container" v-loading="loading">
      <div class="gec-t-body">
        <div class="t-header t-tr">
          <div class="t-name t-td">姓名</div>
          <div class="t-mid">
            <div class="t-school t-td">申请学校</div>
            <div class="t-mentor t-td">导师</div>
            <div class="t-ddl t-td">网申DDL</div>
            <div class="t-status t-td">状态</div>
            <div class="t-remark t-td">面试备注说明</div>
          </div>
          <div class="t-op t-td">操作</div>
        </div>
        <div class="t-b t-tr" v-for="item,index in pageData.tableData" :key="index">
          <div class="t-name t-td">{{item.studentName}}</div>
          <div class="t-for-container t-mid">
            <div class="t-for-item" v-for="record,index in item.applicationsList" :key="index">
              <div class="t-school t-td">{{record.applySchoolName}}</div>
              <div class="t-mentor t-td">{{record.teacherName}}</div>
              <div class="t-ddl t-td">{{record.deadline|momentDay}}</div>
              <div class="t-status t-td"><status-block :id="record.applicationId" :submitDate="record.submitDate" :status="record.applicationStatus"></status-block></div>
              <div class="t-remark t-td">{{record.remark || '无'}}</div>
            </div>
          </div>
          <div class="t-op t-td">
            <div>
              <router-link :to="{path:'/dashboard/bUpdateStudent', query:{id: item.studentId}}" class="a-link">编辑</router-link> | <router-link :to="{path:'/dashboard/student', query:{id: item.studentId}}" class="a-link">详细信息</router-link>
            </div>
          </div>
        </div>
      </div>
      <div class="pagination">
        <el-pagination
          :page-size = "20"
          :page-count = "pageData.page.allPageNum"
          :current-page = "pageData.page.currentPageNum"
          @current-change = "handleChangePage"
          layout="prev, pager, next"
          >
        </el-pagination>
      </div>
    </div>
  </div>
</div>
